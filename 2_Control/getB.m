function [ B ] = getB( X_eq,u_eq )

system_constants;
theta_0 = X_eq(1,1);
theta_1 = X_eq(2,1);
theta_2 = X_eq(3,1);
dtheta_0 = X_eq(4,1);
dtheta_1 = X_eq(5,1);
dtheta_2 = X_eq(6,1);
tau = u_eq;

t4 = theta_0+theta_1+theta_2;
t2 = cos(t4);
t6 = theta_0+theta_1;
t3 = cos(t6);
t5 = t2.^2;
t7 = sin(t6);
t8 = sin(t4);
t9 = t3.^2;
t10 = t7.^2;
t11 = t8.^2;
t12 = r.^2;
t13 = sin(theta_0);
t14 = m_1.^2;
t15 = r_ee.^2;
t16 = cos(theta_0);
t17 = t13.^2;
t18 = t16.^2;
t19 = m_1.*r_ee.*t3.*t5.*t16.*4.0;
t20 = m_1.*r_ee.*t3.*t11.*t16.*4.0;
t21 = m_2.*r_ee.*t3.*t11.*t16.*8.0;
t22 = m_1.*r_ee.*t5.*t7.*t13.*4.0;
t23 = m_2.*r_ee.*t5.*t7.*t13.*8.0;
t24 = m_1.*r_ee.*t7.*t11.*t13.*4.0;
t25 = L1.*m_0.*m_1.*t10.*t11.*t12;
t26 = L1.*t5.*t9.*t14.*t15.*t17.*2.0;
t27 = L1.*t5.*t10.*t14.*t15.*t18.*2.0;
t28 = L1.*t9.*t11.*t14.*t15.*t17.*2.0;
t29 = L1.*t10.*t11.*t14.*t15.*t18.*2.0;
t30 = L1.*m_0.*m_1.*t5.*t9.*t12;
t31 = L1.*m_0.*m_1.*t5.*t10.*t12;
t32 = L1.*m_0.*m_1.*t9.*t11.*t12;
t33 = L1.*m_0.*m_2.*t5.*t10.*t12.*4.0;
t34 = L1.*m_0.*m_2.*t9.*t11.*t12.*4.0;
t35 = L1.*m_1.*m_2.*t5.*t9.*t15.*t17.*2.0;
t36 = L1.*m_1.*m_2.*t5.*t10.*t15.*t18.*8.0;
t37 = L1.*m_1.*m_2.*t9.*t11.*t15.*t18.*2.0;
t38 = L1.*m_1.*m_2.*t5.*t10.*t15.*t17.*2.0;
t39 = L1.*m_1.*m_2.*t9.*t11.*t15.*t17.*8.0;
t40 = L1.*m_1.*m_2.*t10.*t11.*t15.*t18.*2.0;
t41 = L1.*m_1.*m_2.*t2.*t8.*t9.*t13.*t15.*t16.*4.0;
t42 = L1.*m_1.*m_2.*t2.*t8.*t10.*t13.*t15.*t16.*4.0;
t43 = t25+t26+t27+t28+t29+t30+t31+t32+t33+t34+t35+t36+t37+t38+t39+t40+t41+t42-L1.*m_0.*m_2.*t2.*t3.*t7.*t8.*t12.*8.0-L1.*t3.*t5.*t7.*t13.*t14.*t15.*t16.*4.0-L1.*t3.*t7.*t11.*t13.*t14.*t15.*t16.*4.0-L1.*m_1.*m_2.*t2.*t3.*t7.*t8.*t15.*t17.*8.0-L1.*m_1.*m_2.*t2.*t3.*t7.*t8.*t15.*t18.*8.0-L1.*m_1.*m_2.*t3.*t5.*t7.*t13.*t15.*t16.*8.0-L1.*m_1.*m_2.*t3.*t7.*t11.*t13.*t15.*t16.*8.0;
t44 = 1.0./t43;
B = [0.0;0.0;0.0;(m_1.*t5.*t9.*2.0+m_1.*t5.*t10.*2.0+m_2.*t5.*t10.*8.0+m_1.*t9.*t11.*2.0+m_1.*t10.*t11.*2.0+m_2.*t9.*t11.*8.0-m_2.*t2.*t3.*t7.*t8.*1.6e1)./(m_0.*m_1.*t5.*t9.*t12+m_0.*m_1.*t5.*t10.*t12+m_0.*m_2.*t5.*t10.*t12.*4.0+m_0.*m_1.*t9.*t11.*t12+m_0.*m_1.*t10.*t11.*t12+m_0.*m_2.*t9.*t11.*t12.*4.0+t5.*t9.*t14.*t15.*t17.*2.0+t5.*t10.*t14.*t15.*t18.*2.0+t9.*t11.*t14.*t15.*t17.*2.0+t10.*t11.*t14.*t15.*t18.*2.0+m_1.*m_2.*t5.*t9.*t15.*t17.*2.0+m_1.*m_2.*t5.*t10.*t15.*t17.*2.0+m_1.*m_2.*t5.*t10.*t15.*t18.*8.0+m_1.*m_2.*t9.*t11.*t15.*t17.*8.0+m_1.*m_2.*t9.*t11.*t15.*t18.*2.0+m_1.*m_2.*t10.*t11.*t15.*t18.*2.0-m_0.*m_2.*t2.*t3.*t7.*t8.*t12.*8.0-t3.*t5.*t7.*t13.*t14.*t15.*t16.*4.0-t3.*t7.*t11.*t13.*t14.*t15.*t16.*4.0-m_1.*m_2.*t2.*t3.*t7.*t8.*t15.*t17.*8.0-m_1.*m_2.*t2.*t3.*t7.*t8.*t15.*t18.*8.0-m_1.*m_2.*t3.*t5.*t7.*t13.*t15.*t16.*8.0+m_1.*m_2.*t2.*t8.*t9.*t13.*t15.*t16.*4.0+m_1.*m_2.*t2.*t8.*t10.*t13.*t15.*t16.*4.0-m_1.*m_2.*t3.*t7.*t11.*t13.*t15.*t16.*8.0);-t44.*(t19+t20+t21+t22+t23+t24+L1.*m_1.*t5.*t9.*2.0+L1.*m_1.*t5.*t10.*2.0+L1.*m_2.*t5.*t10.*8.0+L1.*m_1.*t9.*t11.*2.0+L1.*m_1.*t10.*t11.*2.0+L1.*m_2.*t9.*t11.*8.0-m_2.*r_ee.*t2.*t3.*t8.*t13.*8.0-m_2.*r_ee.*t2.*t7.*t8.*t16.*8.0-L1.*m_2.*t2.*t3.*t7.*t8.*1.6e1);t44.*(t19+t20+t21+t22+t23+t24-m_2.*r_ee.*t2.*t3.*t8.*t13.*8.0-m_2.*r_ee.*t2.*t7.*t8.*t16.*8.0+L1.*m_1.*r_ee.*t2.*t9.*t16.*2.0-L1.*m_1.*r_ee.*t2.*t10.*t16.*2.0-L1.*m_2.*r_ee.*t2.*t10.*t16.*8.0-L1.*m_1.*r_ee.*t8.*t9.*t13.*2.0+L1.*m_1.*r_ee.*t8.*t10.*t13.*2.0-L1.*m_2.*r_ee.*t8.*t9.*t13.*8.0+L1.*m_1.*r_ee.*t2.*t3.*t7.*t13.*4.0+L1.*m_2.*r_ee.*t2.*t3.*t7.*t13.*8.0+L1.*m_1.*r_ee.*t3.*t7.*t8.*t16.*4.0+L1.*m_2.*r_ee.*t3.*t7.*t8.*t16.*8.0)];

end

